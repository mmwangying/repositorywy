## #5.有如下log文件，请打印出独立IP，并统计独立IP数，（分别使用python和shell），检测异常ip（1分钟内访问超过30次） ##

awk -F " " '{print $1" "$4}' log | awk -F "[" '{print $1" "$2}' | awk -F ":" '{print $1":"$2":"$3}' > newlog
#打印独立的ip
cat newlog | sort -t " " -k1,1 -u
#统计独立ip的个数
cat newlog | sort -t " " -k1,1 -u | wc -l
#统计1分钟内，
cat newlog | awk '{print $1$2}' | awk '{a[$1]++}END{for(i in a){print i " " a[i]}}'

cat newlog | awk '{print $1$2}' | awk '{a[$1]++}END{for(i in a){print i " " a[i]}}' | grep -n ' [3-9][0-9]\{1\}'